import _Map from "@babel/runtime/core-js/map";
import PouchDB from 'pouchdb';
import stringify from 'json-stable-stringify';
import get from './getWithDefaultValue';
var dbs = new _Map();
var userCounts = new _Map();
export function create(options) {
  var key = stringify(options);
  var db = get.call(dbs, key, function () {
    return new PouchDB(options);
  });
  var userCount = get.call(userCounts, key, function () {
    return 0;
  });
  userCounts.set(key, userCount + 1);
  return db;
}
export function close(options) {
  var key = stringify(options);
  var userCount = userCounts.get(key) - 1;
  userCounts.set(key, userCount);

  if (!userCount) {
    dbs.get(key).close();
    dbs.delete(key);
  }
}
//# sourceMappingURL=pouchdbConnections.js.map